import{r as n,j as e,L as K,$ as M,S as N}from"./app-BaJ1uPEp.js";import{F as Q,S as U}from"./frontend-layout-BcjG_mvi.js";import{c as Y,B as m}from"./button-CV0YeMoG.js";import{C as Z,d as ee}from"./card-Dn7YJrue.js";import{P as se}from"./pagination-VCzLF7db.js";import{I as w}from"./input-DvQox4_7.js";import{L as p}from"./label-ClSqAyBn.js";import{S as ae}from"./slider-QtEJLfSz.js";import{S as F,a as P,b as A,c as I,d as i}from"./select-Clb-v8H6.js";import{C as j}from"./checkbox-DCedZhAq.js";import{S as te,J as re,k as le,X as O}from"./sonner-B_1Y2EG6.js";import{B as ce,a as ne,b as z,d as H,e as ie}from"./breadcrumb-BbD90ndO.js";import{S as q}from"./separator-CEZkZLOT.js";import{A as oe,a as de,b as me,c as xe}from"./accordion-C1ovgViA.js";import"./tabs-B-GsCbyv.js";import"./index-4ejw1QIu.js";import"./index-DKM3Rv-a.js";import"./index-BZHxc9Pz.js";import"./loader-circle-CFhEIJg-.js";import"./navigation-menu-DSFceqgV.js";import"./index-PXdSJRW8.js";import"./chevron-down-ClUYmTxr.js";import"./badge-BehvzPys.js";import"./chevron-left-BfYD2hTA.js";import"./chevron-right-DEcAd_h2.js";import"./ellipsis-C8z_MMzX.js";import"./index-zkgesfvN.js";import"./index-BaXPdtN3.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],ue=Y("Filter",he);function He({products:t,filters:a}){var R;const[G,v]=n.useState(!1),[b,S]=n.useState(a.search||""),[r,x]=n.useState([a.min_price||0,a.max_price||1e3]),[$,L]=n.useState(a.sort_by||"created_at"),[B,T]=n.useState(a.sort_direction||"desc"),[V,E]=n.useState(((R=a.per_page)==null?void 0:R.toString())||"20"),[c,l]=n.useState(!1),[h,g]=n.useState(a.catalogue?[parseInt(a.catalogue.toString())]:[]),[o,y]=n.useState({inStock:a.in_stock==="1",outOfStock:a.out_of_stock==="1"}),J=s=>{s.preventDefault(),u()},u=()=>{l(!0);const s={};b&&(s.search=b),s.min_price=r[0].toString(),s.max_price=r[1].toString(),s.sort_by=$,s.sort_direction=B,s.per_page=V,h.length===1&&(s.catalogue=h[0].toString()),o.inStock&&!o.outOfStock?s.in_stock="1":!o.inStock&&o.outOfStock&&(s.out_of_stock="1"),N.get("/product",s,{preserveScroll:!0,preserveState:!0,only:["products","filters"],onSuccess:()=>{l(!1),v(!1)},onError:()=>{l(!1)}})},k=()=>{S(""),x([0,1e3]),L("created_at"),T("desc"),E("20"),g([]),y({inStock:!1,outOfStock:!1}),N.get("/product",{},{preserveScroll:!0,preserveState:!0,only:["products","filters"],onSuccess:()=>{l(!1),v(!1)}})},_=(s,d)=>{g(d?[s]:[])};return e.jsxs(Q,{children:[e.jsx(K,{title:"Products - Marketplace"}),e.jsxs("div",{className:"container px-4 py-8 mx-auto",children:[e.jsx(ce,{className:"mb-6",children:e.jsxs(ne,{children:[e.jsx(z,{children:e.jsx(H,{href:"/",children:"Home"})}),e.jsx(ie,{}),e.jsx(z,{children:e.jsx(H,{children:"Products"})})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Products"}),e.jsxs("p",{className:"text-muted-foreground",children:[t.meta.total," products found"]})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsx("form",{onSubmit:J,className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(w,{type:"search",placeholder:"Search products...",className:"pr-10 w-full md:w-[250px]",value:b,onChange:s=>S(s.target.value)}),e.jsxs(m,{type:"submit",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Search"})]})]})}),e.jsxs(te,{open:G,onOpenChange:v,children:[e.jsx(re,{asChild:!0,children:e.jsxs(m,{variant:"outline",className:"gap-2 md:hidden",children:[e.jsx(ue,{className:"h-4 w-4"}),"Filters"]})}),e.jsx(le,{side:"left",className:"w-[300px] sm:w-[350px]",children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Filters"}),e.jsx("div",{className:"space-y-6 flex-1 overflow-y-auto",children:D()}),e.jsxs("div",{className:"pt-4 border-t mt-auto",children:[e.jsx(m,{className:"w-full mb-2",onClick:u,disabled:c,children:c?"Applying...":"Apply Filters"}),e.jsx(m,{variant:"outline",className:"w-full",onClick:k,disabled:c,children:"Clear Filters"})]})]})})]}),e.jsxs(F,{value:$,onValueChange:s=>{L(s),setTimeout(()=>u(),0)},children:[e.jsx(P,{className:"w-[120px] md:w-[150px]",children:e.jsx(A,{placeholder:"Sort by"})}),e.jsxs(I,{children:[e.jsx(i,{value:"created_at",children:"Newest"}),e.jsx(i,{value:"price",children:"Price"}),e.jsx(i,{value:"name",children:"Name"})]})]}),e.jsxs(F,{value:B,onValueChange:s=>{T(s),setTimeout(()=>u(),0)},children:[e.jsx(P,{className:"w-[100px]",children:e.jsx(A,{placeholder:"Order"})}),e.jsxs(I,{children:[e.jsx(i,{value:"asc",children:"Ascending"}),e.jsx(i,{value:"desc",children:"Descending"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsx("div",{className:"hidden md:block w-[280px] shrink-0",children:e.jsxs("div",{className:"bg-muted/20 rounded-lg p-4 sticky top-24",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-semibold",children:"Filters"}),e.jsx(m,{variant:"ghost",size:"sm",className:"text-xs h-auto p-1",onClick:k,children:"Clear all"})]}),D(),e.jsx(m,{onClick:u,className:"w-full mt-4",disabled:c,children:c?"Applying...":"Apply Filters"})]})}),e.jsxs("div",{className:"flex-1",children:[W()&&e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[a.search&&e.jsxs("div",{className:"bg-muted rounded-full px-3 py-1 text-sm flex items-center",children:[e.jsxs("span",{className:"mr-1",children:["Search: ",a.search]}),e.jsx("button",{onClick:()=>{S("");const s={...a,search:void 0};f(s)},className:"focus:outline-none",children:e.jsx(O,{className:"h-3 w-3"})})]}),(a.min_price||a.max_price)&&e.jsxs("div",{className:"bg-muted rounded-full px-3 py-1 text-sm flex items-center",children:[e.jsxs("span",{className:"mr-1",children:["Price: $",a.min_price||0," - $",a.max_price||1e3]}),e.jsx("button",{onClick:()=>{x([0,1e3]);const s={...a,min_price:void 0,max_price:void 0};f(s)},className:"focus:outline-none",children:e.jsx(O,{className:"h-3 w-3"})})]}),a.catalogue&&e.jsxs("div",{className:"bg-muted rounded-full px-3 py-1 text-sm flex items-center",children:[e.jsxs("span",{className:"mr-1",children:["Category: ",a.catalogue]}),e.jsx("button",{onClick:()=>{g([]);const s={...a,catalogue:void 0};f(s)},className:"focus:outline-none",children:e.jsx(O,{className:"h-3 w-3"})})]})]}),c&&e.jsxs("div",{className:"w-full py-12 text-center",children:[e.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]",role:"status",children:e.jsx("span",{className:"sr-only",children:"Loading..."})}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Loading products..."})]}),!c&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8",children:t.data.map(s=>e.jsxs(Z,{className:"group overflow-hidden",children:[e.jsxs("div",{className:"aspect-square relative overflow-hidden",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover transition-transform group-hover:scale-105"}),s.discount_percentage>0&&e.jsxs("div",{className:"absolute top-2 left-2 bg-red-500 text-white text-xs px-2 py-1 rounded-md",children:["-",s.discount_percentage,"%"]})]}),e.jsxs(ee,{className:"p-4",children:[e.jsx(M,{href:`/product/${s.slug}`,className:"font-medium line-clamp-2 group-hover:text-primary transition-colors",children:s.name}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("div",{children:s.sale_price?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-bold text-primary",children:["$",s.sale_price.toFixed(2)]}),e.jsxs("span",{className:"text-xs text-muted-foreground line-through",children:["$",s.price.toFixed(2)]})]}):e.jsxs("span",{className:"font-bold text-primary",children:["$",s.price.toFixed(2)]})}),e.jsx(M,{href:`/store/${s.store.slug}`,className:"text-xs text-muted-foreground hover:text-primary transition-colors",children:s.store.name})]})]})]},s.id))}),!c&&t.data.length===0&&e.jsxs("div",{className:"text-center py-12 bg-muted/20 rounded-lg",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No products found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Try adjusting your search or filter criteria"}),e.jsx(m,{onClick:k,children:"Clear All Filters"})]}),!c&&t.meta.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",t.meta.from,"-",t.meta.to," of ",t.meta.total," products"]}),e.jsx(se,{children:e.jsxs("div",{className:"flex items-center justify-center",children:[t.meta.current_page>1&&e.jsx("button",{onClick:()=>C(t.meta.current_page-1),className:"px-4 py-2 text-sm border rounded-l-md hover:bg-muted",children:"Previous"}),Array.from({length:t.meta.last_page},(s,d)=>d+1).filter(s=>s===1||s===t.meta.last_page||s>=t.meta.current_page-1&&s<=t.meta.current_page+1).map((s,d,X)=>d>0&&s>X[d-1]+1?e.jsx("span",{className:"px-4 py-2 text-sm border bg-background",children:"..."},`ellipsis-${s}`):e.jsx("button",{onClick:()=>C(s),className:`px-4 py-2 text-sm border ${s===t.meta.current_page?"bg-primary text-primary-foreground":"bg-background hover:bg-muted"}`,children:s},s)),t.meta.current_page<t.meta.last_page&&e.jsx("button",{onClick:()=>C(t.meta.current_page+1),className:"px-4 py-2 text-sm border rounded-r-md hover:bg-muted",children:"Next"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Show:"}),e.jsxs(F,{value:V,onValueChange:s=>{E(s);const d={...a,per_page:s};f(d)},children:[e.jsx(P,{className:"w-[70px]",children:e.jsx(A,{placeholder:"20"})}),e.jsxs(I,{children:[e.jsx(i,{value:"12",children:"12"}),e.jsx(i,{value:"20",children:"20"}),e.jsx(i,{value:"36",children:"36"}),e.jsx(i,{value:"48",children:"48"})]})]})]})]})]})]})]})]});function D(){return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Price Range"}),e.jsx("div",{className:"px-2",children:e.jsx(ae,{value:r,max:1e3,step:10,onValueChange:s=>x(s)})}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("span",{className:"text-sm",children:["$",r[0]]}),e.jsxs("span",{className:"text-sm",children:["$",r[1]]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(w,{className:"h-8",type:"number",min:0,max:r[1],value:r[0],onChange:s=>x([parseInt(s.target.value)||0,r[1]])}),e.jsx("span",{children:"-"}),e.jsx(w,{className:"h-8",type:"number",min:r[0],max:1e3,value:r[1],onChange:s=>x([r[0],parseInt(s.target.value)||0])})]})]}),e.jsx(q,{}),e.jsx(oe,{type:"multiple",className:"w-full",children:e.jsxs(de,{value:"categories",className:"border-none",children:[e.jsx(me,{className:"py-1",children:e.jsx("span",{className:"text-sm font-medium",children:"Categories"})}),e.jsx(xe,{children:e.jsxs("div",{className:"pl-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{id:"category-electronics",checked:h.includes(1),onCheckedChange:s=>_(1,!!s)}),e.jsx(p,{htmlFor:"category-electronics",className:"text-sm",children:"Electronics"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{id:"category-clothing",checked:h.includes(2),onCheckedChange:s=>_(2,!!s)}),e.jsx(p,{htmlFor:"category-clothing",className:"text-sm",children:"Clothing"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{id:"category-home",checked:h.includes(3),onCheckedChange:s=>_(3,!!s)}),e.jsx(p,{htmlFor:"category-home",className:"text-sm",children:"Home & Garden"})]})]})})]})}),e.jsx(q,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Availability"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{id:"in-stock",checked:o.inStock,onCheckedChange:s=>y({...o,inStock:!!s})}),e.jsx(p,{htmlFor:"in-stock",className:"text-sm",children:"In Stock"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{id:"out-of-stock",checked:o.outOfStock,onCheckedChange:s=>y({...o,outOfStock:!!s})}),e.jsx(p,{htmlFor:"out-of-stock",className:"text-sm",children:"Out of Stock"})]})]})]})]})}function W(){return!!(a.search||a.min_price||a.max_price||a.catalogue||a.store||a.in_stock||a.out_of_stock)}function C(s){l(!0),N.get("/product",{...a,page:s.toString()},{preserveScroll:!0,preserveState:!0,only:["products"],onSuccess:()=>l(!1),onError:()=>l(!1)})}function f(s){l(!0),N.get("/product",s,{preserveScroll:!0,preserveState:!0,only:["products","filters"],onSuccess:()=>l(!1),onError:()=>l(!1)})}}export{He as default};
