import{r as x,j as e,L as T,$ as i,S as r}from"./app-BXEVKu8S.js";import{A as D,D as B,a as F,b as _,c}from"./app-layout-FUQVz8B4.js";import{B as l}from"./app-logo-icon-eA7Sa6_S.js";import{I}from"./input-DYl2xwC_.js";import{H as M}from"./heading-small-CJkaQd_g.js";import{B as E}from"./badge-UXt2QoEz.js";import{C as V,a as H,b as L,d as Q,e as k}from"./card-CUhvS6T_.js";import{P as R}from"./pagination-D_cllie-.js";import{S as u,a as p,b as j,c as g,d as n}from"./select-0bjdaqSH.js";import{F as v}from"./PlusIcon-CudBBi_I.js";import{F as X}from"./MagnifyingGlassIcon-CvbVVbxT.js";import{E as $}from"./ellipsis-vertical-RwGKDmBc.js";import{E as z}from"./eye-BazTL7gl.js";import{P as A}from"./pencil-BmFRjDu1.js";import{T as q}from"./trash-DxkLMrXf.js";import"./index-BVUcwr4W.js";import"./index-DqbdpqtQ.js";import"./index-Bnnw5rqN.js";import"./chevron-down-CDMMiKSJ.js";function me({blocks:t,filters:a,locations:d}){const[o,m]=x.useState(a.search||""),[f,h]=x.useState(!1),N=s=>{s.preventDefault(),r.get(route("blocks.index"),{...a,search:o},{preserveState:!0})},w=s=>{r.get(route("blocks.index"),{...a,location:s==="all"?"":s},{preserveState:!0})},C=s=>{r.get(route("blocks.index"),{...a,status:s},{preserveState:!0})},S=()=>{m(""),r.get(route("blocks.index"),{},{preserveState:!0})},y=s=>{r.get(route("blocks.index"),{...a,page:s},{preserveState:!0})},b=s=>{r.get(route("blocks.index"),{...a,per_page:s},{preserveState:!0})},P=s=>{confirm("Bạn có chắc chắn muốn xóa block này và tất cả các mục trong đó?")&&(h(!0),r.delete(route("blocks.destroy",s),{onFinish:()=>h(!1)}))};return e.jsxs(D,{children:[e.jsx(T,{title:"Quản lý Block"}),e.jsxs("div",{className:"space-y-6 px-4 py-6",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b",children:[e.jsx(M,{title:"Quản lý Block",description:"Tạo và quản lý các khối nội dung tùy chỉnh trên trang web"}),e.jsx(l,{asChild:!0,children:e.jsxs(i,{href:route("blocks.create"),children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Thêm Block Mới"]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsx("form",{onSubmit:N,className:"flex-1 max-w-sm",children:e.jsxs("div",{className:"relative flex items-center",children:[e.jsx(X,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500 dark:text-gray-400"}),e.jsx(I,{type:"search",placeholder:"Tìm kiếm block...",className:"pl-8",value:o,onChange:s=>m(s.target.value)}),e.jsx(l,{type:"submit",size:"sm",variant:"ghost",className:"absolute right-0",children:"Tìm"})]})}),d.length>0&&e.jsxs(u,{value:a.location||"all",onValueChange:s=>w(s),children:[e.jsx(p,{className:"w-[180px]",children:e.jsx(j,{placeholder:"Vị trí"})}),e.jsxs(g,{children:[e.jsx(n,{value:"all",children:"Tất cả vị trí"}),d.map(s=>e.jsx(n,{value:s,children:s},s))]})]}),e.jsxs(u,{value:a.status||"all",onValueChange:s=>C(s==="all"?null:s),children:[e.jsx(p,{className:"w-[150px]",children:e.jsx(j,{placeholder:"Trạng thái"})}),e.jsxs(g,{children:[e.jsx(n,{value:"all",children:"Tất cả"}),e.jsx(n,{value:"active",children:"Hoạt động"}),e.jsx(n,{value:"inactive",children:"Ẩn"})]})]}),(a.search||a.location||a.status)&&e.jsx(l,{variant:"ghost",onClick:S,children:"Xóa bộ lọc"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.data.length===0?e.jsxs("div",{className:"col-span-full text-center py-12 text-muted-foreground",children:[e.jsx("p",{className:"mb-4",children:"Không tìm thấy block nào."}),e.jsx(l,{asChild:!0,children:e.jsxs(i,{href:route("blocks.create"),children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Thêm Block Mới"]})})]}):t.data.map(s=>e.jsxs(V,{className:"overflow-hidden",children:[e.jsx(H,{className:"pb-2",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(L,{className:"text-lg",children:s.name}),s.location&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Vị trí: ",s.location]})]}),e.jsx(E,{variant:s.is_active?"default":"secondary",children:s.is_active?"Hoạt động":"Ẩn"})]})}),e.jsxs(Q,{className:"pb-2",children:[s.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[e.jsxs("div",{className:"text-xs px-2 py-1 bg-muted rounded-md",children:[s.items_count," mục"]}),e.jsxs("div",{className:"text-xs px-2 py-1 bg-muted rounded-md",children:["Slug: ",s.slug]})]})]}),e.jsxs(k,{className:"flex justify-between pt-2",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Cập nhật: ",new Date(s.updated_at).toLocaleDateString()]}),e.jsxs(B,{children:[e.jsx(F,{asChild:!0,children:e.jsxs(l,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Mở menu"}),e.jsx($,{className:"h-4 w-4"})]})}),e.jsxs(_,{align:"end",children:[e.jsx(c,{asChild:!0,children:e.jsxs(i,{href:route("blocks.show",s.id),className:"cursor-pointer",children:[e.jsx(z,{className:"mr-2 h-4 w-4"})," Xem chi tiết"]})}),e.jsx(c,{asChild:!0,children:e.jsxs(i,{href:route("blocks.edit",s.id),className:"cursor-pointer",children:[e.jsx(A,{className:"mr-2 h-4 w-4"})," Chỉnh sửa"]})}),e.jsxs(c,{className:"text-destructive focus:text-destructive cursor-pointer",onClick:()=>P(s.id),disabled:f,children:[e.jsx(q,{className:"mr-2 h-4 w-4"})," Xóa"]})]})]})]})]},s.id))}),t.meta&&e.jsx("div",{className:"mt-6 border-t pt-6",children:e.jsx(R,{currentPage:t.meta.current_page,lastPage:t.meta.last_page,perPage:parseInt(a.per_page||"10"),total:t.meta.total,from:t.meta.from||0,to:t.meta.to||0,onPageChange:y,onPerPageChange:b})})]})]})}export{me as default};
