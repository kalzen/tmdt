import{m as L,r as x,j as e,L as M,$ as P}from"./app-dP_i2JvW.js";import{_ as a}from"./translate-BeYGUAVh.js";import{A as R,D as B,a as z,b as H,c as O}from"./app-layout-LWa8bQAX.js";import{B as n}from"./button-DKJQ5y5i.js";import{I as o}from"./input-dItr9mAp.js";import{L as c}from"./label-BBtxSD5n.js";import{C as b,a as N,b as C,c as w,d as k}from"./card-Bq_fwOuw.js";import{S as v}from"./switch-BvNE2NN9.js";import{H as U}from"./heading-small-DYScH-Pw.js";import{I as p}from"./input-error-C73DwbSp.js";import{P as W}from"./plus-Ch44pHxa.js";import{T as G}from"./trash-2-CemvYZu2.js";import"./sonner-CnSKM96x.js";import"./index-CnRC6Q4F.js";import"./index-bY1mtz_b.js";import"./index-BVBmE_gu.js";import"./app-logo-icon-DjwsciTF.js";import"./list-DZFvdjjL.js";import"./store-CIF04_BC.js";import"./breadcrumb-DH3QRoTt.js";import"./index-D6pgXtgL.js";function ve({attribute:t,types:j}){var y;const{data:i,setData:d,post:A,processing:f,errors:m}=L({name:t.name||"",code:t.code||"",type:t.type||"",is_filterable:t.is_filterable||!1,is_required:t.is_required||!1,display_order:t.display_order.toString()||"0",is_active:t.is_active||!0,values:t.values||[],_method:"PUT"}),[h,S]=x.useState({}),[V,J]=x.useState(t.type),T=[{title:a("admin.attributes","Attributes"),href:route("attributes.index")},{title:t.name,href:route("attributes.edit",t.id)}];x.useEffect(()=>{!["select","multiselect","radio"].includes(i.type)&&["select","multiselect","radio"].includes(V)&&d("values",i.values.map(s=>({...s,_action:"delete"})))},[i.type]);const D=s=>{s.preventDefault(),A(route("attributes.update",t.id))},q=s=>{d("type",s)},F=()=>{const s={value:"",_action:"create"};d("values",[...i.values,s])},E=s=>{const l=[...i.values],r=l[s];r.id?(l[s]={...r,_action:"delete"},d("values",l)):(l.splice(s,1),d("values",l))},_=(s,l,r)=>{const u=[...i.values];u[s]={...u[s],[l]:r,_action:u[s].id?"update":"create"},d("values",u)},I=s=>{S({...h,[s]:!h[s]})},$=["select","multiselect","radio"].includes(i.type),g=i.values.filter(s=>s._action!=="delete");return e.jsxs(R,{breadcrumbs:T,children:[e.jsx(M,{title:`${a("admin.edit_attribute","Edit Attribute")}: ${t.name}`}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(U,{title:`${a("admin.edit_attribute","Edit Attribute")}: ${t.name}`,description:a("admin.edit_attribute_description","Modify attribute properties")})}),e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsxs(b,{children:[e.jsxs(N,{children:[e.jsx(C,{children:a("admin.attribute_information","Attribute Information")}),e.jsx(w,{children:a("admin.attribute_information_description","Basic attribute details")})]}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"name",children:[a("admin.name","Name")," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(o,{id:"name",value:i.name,onChange:s=>d("name",s.target.value),placeholder:a("admin.name_placeholder","Attribute name")}),e.jsx(p,{message:m.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"code",children:a("admin.code","Code")}),e.jsx(o,{id:"code",value:i.code,onChange:s=>d("code",s.target.value),placeholder:a("admin.code_placeholder","Attribute code")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a("admin.code_help","Used in code. Will be auto-generated from name if empty.")}),e.jsx(p,{message:m.code})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"type",children:[a("admin.type","Type")," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(B,{children:[e.jsx(z,{asChild:!0,children:e.jsxs(n,{variant:"outline",className:"w-full justify-between",children:[i.type?(y=j.find(s=>s.value===i.type))==null?void 0:y.label:a("admin.select_type","Select type"),e.jsx("svg",{className:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]})}),e.jsx(H,{className:"w-full",children:j.map(s=>e.jsx(O,{onClick:()=>q(s.value),children:s.label},s.value))})]}),e.jsx(p,{message:m.type})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"display_order",children:a("admin.display_order","Display Order")}),e.jsx(o,{id:"display_order",type:"number",min:"0",value:i.display_order,onChange:s=>d("display_order",s.target.value),placeholder:"0"}),e.jsx(p,{message:m.display_order})]})]}),e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{id:"is_filterable",checked:i.is_filterable,onCheckedChange:s=>d("is_filterable",s)}),e.jsx(c,{htmlFor:"is_filterable",children:a("admin.is_filterable","Filterable")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{id:"is_required",checked:i.is_required,onCheckedChange:s=>d("is_required",s)}),e.jsx(c,{htmlFor:"is_required",children:a("admin.is_required","Required")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{id:"is_active",checked:i.is_active,onCheckedChange:s=>d("is_active",s)}),e.jsx(c,{htmlFor:"is_active",children:a("admin.is_active","Active")})]})]})]})]}),$&&e.jsxs(b,{children:[e.jsxs(N,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxs("div",{children:[e.jsx(C,{children:a("admin.attribute_values","Attribute Values")}),e.jsx(w,{children:a("admin.attribute_values_description","Available options for this attribute")})]}),e.jsxs(n,{type:"button",onClick:F,variant:"outline",size:"sm",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),a("admin.add_value","Add Value")]})]}),e.jsx(k,{children:g.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:a("admin.no_values",'No values yet. Click "Add Value" to create options for this attribute.')}):e.jsx("div",{className:"space-y-3",children:g.map((s,l)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx(o,{value:s.value,onChange:r=>_(l,"value",r.target.value),placeholder:a("admin.value","Value")})}),i.type==="select"&&e.jsxs("div",{className:"w-32 flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full border cursor-pointer",style:s.color_code?{backgroundColor:s.color_code}:{},onClick:()=>I(l)}),h[l]&&e.jsx(o,{type:"color",value:s.color_code||"#000000",onChange:r=>_(l,"color_code",r.target.value),className:"w-20 h-8"})]}),e.jsx(n,{type:"button",variant:"ghost",size:"icon",onClick:()=>E(i.values.findIndex(r=>r.id&&r.id===s.id||!r.id&&r===s)),className:"text-destructive",children:e.jsx(G,{className:"h-4 w-4"})})]},s.id||`new-${l}`))})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(n,{type:"submit",disabled:f,children:f?a("admin.saving","Saving..."):a("admin.save_attribute","Save Attribute")}),e.jsx(P,{href:route("attributes.index"),children:e.jsx(n,{variant:"outline",type:"button",children:a("admin.cancel","Cancel")})})]})]})]})]})}export{ve as default};
