import{r as N,j as e,L as y,$ as b,S as n}from"./app-B-84GseX.js";import{A as S,D as _,a as C,b as w,c as T}from"./app-layout-DtGowkgQ.js";import{B as c}from"./app-logo-icon-DR8hw6aZ.js";import{I as P}from"./input-Cre6IN-k.js";import{H as D}from"./heading-small-fuH_0C23.js";import{T as k,a as L,b as l,c as i,d as B,e as s}from"./table-Dl1mLuaT.js";import{B as H}from"./badge-luecMNZk.js";import{P as M}from"./pagination-Cobvq3Ig.js";import{C as z}from"./chevron-down-C4kc6uCx.js";import"./index-BeMZBMLQ.js";import"./index-vnsyDsqF.js";import"./select-U5iU8k38.js";import"./index-BBt4VV9G.js";import"./chevron-left-Ccu_SHCc.js";function U({logs:a,filters:r,actions:o}){const[m,h]=N.useState(r.search||""),x=t=>{t.preventDefault(),n.get(route("activity-logs.index"),{search:m},{preserveState:!0})},p=t=>{n.get(route("activity-logs.index"),{...r,action:t},{preserveState:!0})},u=()=>{n.get(route("activity-logs.index"),{},{preserveState:!0})},j=t=>({created:"default",updated:"default",deleted:"destructive",force_deleted:"destructive",restored:"default",login:"default",logout:"secondary",login_failed:"destructive"})[t]||"default",g=t=>{if(!t)return"N/A";const d=t.split("\\");return d[d.length-1]},v=t=>{n.get(route("activity-logs.index"),{...r,page:t},{preserveState:!0})},f=t=>{n.get(route("activity-logs.index"),{...r,per_page:t},{preserveState:!0})};return e.jsxs(S,{children:[e.jsx(y,{title:"Nhật ký hoạt động"}),e.jsxs("div",{className:"px-4 py-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between pb-4 border-b",children:e.jsx(D,{title:"Nhật ký hoạt động",description:"Theo dõi tất cả các hoạt động trên hệ thống"})}),e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsx("form",{onSubmit:x,className:"flex-1 max-w-sm",children:e.jsxs("div",{className:"relative flex items-center",children:[e.jsx(P,{type:"search",placeholder:"Tìm kiếm...",className:"pl-8 pr-12",value:m,onChange:t=>h(t.target.value)}),e.jsx(c,{type:"submit",size:"sm",variant:"ghost",className:"absolute right-0",children:"Tìm"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(_,{children:[e.jsx(C,{asChild:!0,children:e.jsxs(c,{variant:"outline",className:"flex items-center gap-1",children:["Loại ",e.jsx(z,{size:16})]})}),e.jsx(w,{align:"end",children:Object.entries(o).map(([t,d])=>e.jsx(T,{onClick:()=>p(t),children:d},t))})]}),(r.action||r.model||r.search)&&e.jsx(c,{variant:"ghost",onClick:u,children:"Xóa bộ lọc"})]})]}),e.jsxs(k,{children:[e.jsx(L,{children:e.jsxs(l,{children:[e.jsx(i,{children:"Thời gian"}),e.jsx(i,{children:"Người dùng"}),e.jsx(i,{children:"Hành động"}),e.jsx(i,{children:"Đối tượng"}),e.jsx(i,{children:"Mô tả"}),e.jsx(i,{children:"IP"}),e.jsx(i,{className:"text-right",children:"Chi tiết"})]})}),e.jsx(B,{children:a.data.length===0?e.jsx(l,{children:e.jsx(s,{colSpan:7,className:"text-center py-4 text-muted-foreground",children:"Không có dữ liệu"})}):a.data.map(t=>e.jsxs(l,{children:[e.jsx(s,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-medium",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(t.created_at).toLocaleTimeString()}),e.jsx("span",{className:"text-xs italic text-muted-foreground",children:new Date(t.created_at).toLocaleString()})]})}),e.jsx(s,{children:t.user_name||"Ẩn danh"}),e.jsx(s,{children:e.jsx(H,{variant:j(t.action),children:o[t.action]||t.action})}),e.jsx(s,{children:g(t.model_type)}),e.jsx(s,{className:"max-w-md",children:e.jsx("div",{className:"truncate",children:t.description||"Không có mô tả"})}),e.jsx(s,{children:t.ip_address}),e.jsx(s,{className:"text-right",children:e.jsx(c,{asChild:!0,size:"sm",variant:"outline",children:e.jsx(b,{href:route("activity-logs.show",t.id),children:"Chi tiết"})})})]},t.id))})]}),(a==null?void 0:a.meta)&&a.meta.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Hiển thị ",a.meta.from," đến ",a.meta.to," trong tổng số ",a.meta.total," kết quả"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a.meta.current_page>1&&e.jsx(c,{variant:"outline",size:"sm",onClick:()=>n.get(route("activity-logs.index"),{...r,page:a.meta.current_page-1},{preserveState:!0}),children:"Trước"}),a.meta.current_page<a.meta.last_page&&e.jsx(c,{variant:"outline",size:"sm",onClick:()=>n.get(route("activity-logs.index"),{...r,page:a.meta.current_page+1},{preserveState:!0}),children:"Tiếp"})]})]})]}),a.meta&&e.jsx(M,{currentPage:a.meta.current_page,lastPage:a.meta.last_page,perPage:a.meta.per_page,total:a.meta.total,from:a.meta.from,to:a.meta.to,onPageChange:v,onPerPageChange:f})]})}export{U as default};
