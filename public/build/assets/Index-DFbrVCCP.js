import{j as e,r as I,L as M,$ as w,S as h}from"./app-xt-Gv6R0.js";import{H as T}from"./heading-small-B_zEYsDv.js";import{A,D,a as k,b as E,c as y}from"./app-layout-BUtB0wLA.js";import{B as j}from"./button-CbWRp3pC.js";import{I as $}from"./input-CPsfpC3c.js";import{T as B,a as L,b,c as x,d as H,e as d}from"./table-Bfj3chiH.js";import{B as R}from"./badge-DSrCIWq6.js";import{_ as l}from"./translate-CwGdJLJm.js";import{P as z,a as Q,b as c,c as V,d as O,e as u,f as _}from"./pagination-DLcy9hK1.js";import{S as q,a as F,b as G,c as J,d as f}from"./select-D1I0MToF.js";import{E as K}from"./ellipsis-J4IccZez.js";import{P as U}from"./pencil-Cqpyu2gj.js";import{T as W}from"./trash-2-otRxwzYu.js";import"./sonner-BHAROGJj.js";import"./index-D-EV1abi.js";import"./index-Byw1Xbrg.js";import"./index-BpY0AGEN.js";import"./app-logo-icon-Jh25b407.js";import"./list-C-e38HEf.js";import"./store-DLnhggBC.js";import"./breadcrumb-BAQem_jT.js";import"./chevron-left-BCZJ9qH8.js";import"./index-BzWJueuI.js";import"./chevron-down-D-5DWBy2.js";function X({currentPage:a=1,lastPage:t,perPage:m,total:g,from:v,to:N,onPageChange:n,onPerPageChange:S}){const p=()=>{const r=[];if(r.push(e.jsx(c,{children:e.jsx(u,{isActive:a===1,onClick:()=>n(1),children:"1"})},"page-1")),t<=5)for(let i=2;i<=t;i++)r.push(e.jsx(c,{children:e.jsx(u,{isActive:a===i,onClick:()=>n(i),children:i})},`page-${i}`));else{let i=Math.max(2,a-1),o=Math.min(t-1,a+1);i===2&&(o=Math.min(4,t-1)),o===t-1&&(i=Math.max(2,t-3)),i>2&&r.push(e.jsx(c,{children:e.jsx(_,{})},"ellipsis-1"));for(let s=i;s<=o;s++)r.push(e.jsx(c,{children:e.jsx(u,{isActive:a===s,onClick:()=>n(s),children:s})},`page-${s}`));o<t-1&&r.push(e.jsx(c,{children:e.jsx(_,{})},"ellipsis-2")),t>1&&r.push(e.jsx(c,{children:e.jsx(u,{isActive:a===t,onClick:()=>n(t),children:t})},`page-${t}`))}return r};return e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",e.jsx("span",{className:"font-medium",children:v})," to"," ",e.jsx("span",{className:"font-medium",children:N})," of"," ",e.jsx("span",{className:"font-medium",children:g})," results"]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:"Rows per page"}),e.jsxs(q,{value:m.toString(),onValueChange:r=>S(parseInt(r)),children:[e.jsx(F,{className:"h-8 w-[70px]",children:e.jsx(G,{placeholder:m.toString()})}),e.jsxs(J,{children:[e.jsx(f,{value:"10",children:"10"}),e.jsx(f,{value:"20",children:"20"}),e.jsx(f,{value:"50",children:"50"}),e.jsx(f,{value:"100",children:"100"})]})]})]}),e.jsx(z,{children:e.jsxs(Q,{children:[e.jsx(c,{children:e.jsx(V,{onClick:()=>n(Math.max(1,a-1)),className:a<=1?"pointer-events-none opacity-50":""})}),p(),e.jsx(c,{children:e.jsx(O,{onClick:()=>n(Math.min(t,a+1)),className:a>=t?"pointer-events-none opacity-50":""})})]})})]})]})}function Se({catalogues:a,filters:t}){var p,r,C,i,o;const[m,g]=I.useState(t.search||"");console.log("Catalogues data:",a);const v=[{title:l("admin.catalogues","Catalogues"),href:route("catalogues.index")}],N=s=>{s.preventDefault(),h.get(route("catalogues.index"),{search:m},{preserveState:!0})},n=s=>{confirm("Are you sure you want to delete this catalogue?")&&h.delete(route("catalogues.destroy",s))},S=s=>s===0?"":"—".repeat(s)+" ";return e.jsxs(A,{breadcrumbs:v,children:[e.jsx(M,{title:l("admin.catalogues","Catalogues")}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(T,{title:l("admin.catalogues","Catalogues"),description:l("admin.catalogues_description","Manage your store categories and subcategories")}),e.jsx(w,{href:route("catalogues.create"),children:e.jsx(j,{children:l("admin.create_catalogue","Create Catalogue")})})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsx("form",{onSubmit:N,className:"flex-1 max-w-sm",children:e.jsxs("div",{className:"relative flex items-center",children:[e.jsx($,{type:"search",placeholder:l("admin.search_catalogues","Search catalogues..."),className:"pl-4 pr-12",value:m,onChange:s=>g(s.target.value)}),e.jsx(j,{type:"submit",size:"sm",variant:"ghost",className:"absolute right-0",children:l("admin.search","Search")})]})}),t.search&&e.jsx(j,{variant:"ghost",onClick:()=>h.get(route("catalogues.index"),{}),children:l("admin.clear_filters","Clear filters")})]}),e.jsx("div",{className:"border rounded-md",children:e.jsxs(B,{children:[e.jsx(L,{children:e.jsxs(b,{children:[e.jsx(x,{className:"w-[40%]",children:"Name"}),e.jsx(x,{children:"Parent"}),e.jsx(x,{children:"Status"}),e.jsx(x,{children:"Products"}),e.jsx(x,{className:"text-right",children:"Actions"})]})}),e.jsx(H,{children:a.data.length===0?e.jsx(b,{children:e.jsx(d,{colSpan:5,className:"text-center text-muted-foreground py-8",children:t.search?`No catalogues found matching "${t.search}"`:"No catalogues found. Add your first catalogue."})}):a.data.map(s=>e.jsxs(b,{children:[e.jsxs(d,{className:"font-medium",children:[S(s.level)," ",s.name]}),e.jsx(d,{children:s.parent?s.parent.name:"—"}),e.jsx(d,{children:e.jsx(R,{variant:s.is_active?"success":"outline",children:s.is_active?"Active":"Inactive"})}),e.jsx(d,{children:s.products_count}),e.jsx(d,{className:"text-right",children:e.jsxs(D,{children:[e.jsx(k,{asChild:!0,children:e.jsxs(j,{variant:"ghost",size:"icon",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(E,{align:"end",children:[e.jsx(y,{asChild:!0,children:e.jsxs(w,{href:route("catalogues.edit",s.id),children:[e.jsx(U,{className:"h-4 w-4 mr-2"})," Edit"]})}),e.jsxs(y,{onClick:()=>n(s.id),children:[e.jsx(W,{className:"h-4 w-4 mr-2"})," Delete"]})]})]})})]},s.id))})]})}),a&&a.data&&a.data.length>0&&e.jsx("div",{className:"mt-4 border-t pt-4",children:e.jsx(X,{currentPage:((p=a.meta)==null?void 0:p.current_page)||1,lastPage:((r=a.meta)==null?void 0:r.last_page)||1,perPage:parseInt(t.per_page||"10"),total:((C=a.meta)==null?void 0:C.total)||a.data.length,from:((i=a.meta)==null?void 0:i.from)||1,to:((o=a.meta)==null?void 0:o.to)||a.data.length,onPageChange:s=>{h.get(route("catalogues.index"),{...t,page:s},{preserveState:!0,preserveScroll:!0})},onPerPageChange:s=>{h.get(route("catalogues.index"),{...t,per_page:s,page:1},{preserveState:!0})}})})]})]})}export{Se as default};
