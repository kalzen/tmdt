import{r as o,t as H,j as P,R}from"./app-CviGlDDy.js";import{d as U,b as T,a as S,c as z}from"./index-DcrmxLJM.js";import{P as N,d as V}from"./index-BUVTpqLt.js";import{u as O,b as _}from"./button-CLn9TqRh.js";var K=H.useId||(()=>{}),$=0;function ce(t){const[e,n]=o.useState(K());return U(()=>{n(s=>s??String($++))},[t]),t||(e?`radix-${e}`:"")}function q(t,e=globalThis==null?void 0:globalThis.document){const n=T(t);o.useEffect(()=>{const s=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[n,e])}var X="DismissableLayer",I="dismissableLayer.update",Y="dismissableLayer.pointerDownOutside",G="dismissableLayer.focusOutside",B,k=o.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),J=o.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:d,onDismiss:u,...C}=t,a=o.useContext(k),[l,D]=o.useState(null),m=(l==null?void 0:l.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=o.useState({}),f=O(e,c=>D(c)),h=Array.from(a.layers),[v]=[...a.layersWithOutsidePointerEventsDisabled].slice(-1),E=h.indexOf(v),p=l?h.indexOf(l):-1,x=a.layersWithOutsidePointerEventsDisabled.size>0,b=p>=E,w=ee(c=>{const L=c.target,M=[...a.branches].some(g=>g.contains(L));!b||M||(r==null||r(c),d==null||d(c),c.defaultPrevented||u==null||u())},m),A=te(c=>{const L=c.target;[...a.branches].some(g=>g.contains(L))||(i==null||i(c),d==null||d(c),c.defaultPrevented||u==null||u())},m);return q(c=>{p===a.layers.size-1&&(s==null||s(c),!c.defaultPrevented&&u&&(c.preventDefault(),u()))},m),o.useEffect(()=>{if(l)return n&&(a.layersWithOutsidePointerEventsDisabled.size===0&&(B=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),a.layersWithOutsidePointerEventsDisabled.add(l)),a.layers.add(l),W(),()=>{n&&a.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=B)}},[l,m,n,a]),o.useEffect(()=>()=>{l&&(a.layers.delete(l),a.layersWithOutsidePointerEventsDisabled.delete(l),W())},[l,a]),o.useEffect(()=>{const c=()=>y({});return document.addEventListener(I,c),()=>document.removeEventListener(I,c)},[]),P.jsx(N.div,{...C,ref:f,style:{pointerEvents:x?b?"auto":"none":void 0,...t.style},onFocusCapture:S(t.onFocusCapture,A.onFocusCapture),onBlurCapture:S(t.onBlurCapture,A.onBlurCapture),onPointerDownCapture:S(t.onPointerDownCapture,w.onPointerDownCapture)})});J.displayName=X;var Q="DismissableLayerBranch",Z=o.forwardRef((t,e)=>{const n=o.useContext(k),s=o.useRef(null),r=O(e,s);return o.useEffect(()=>{const i=s.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),P.jsx(N.div,{...t,ref:r})});Z.displayName=Q;function ee(t,e=globalThis==null?void 0:globalThis.document){const n=T(t),s=o.useRef(!1),r=o.useRef(()=>{});return o.useEffect(()=>{const i=u=>{if(u.target&&!s.current){let C=function(){F(Y,n,a,{discrete:!0})};const a={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=C,e.addEventListener("click",r.current,{once:!0})):C()}else e.removeEventListener("click",r.current);s.current=!1},d=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(d),e.removeEventListener("pointerdown",i),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>s.current=!0}}function te(t,e=globalThis==null?void 0:globalThis.document){const n=T(t),s=o.useRef(!1);return o.useEffect(()=>{const r=i=>{i.target&&!s.current&&F(G,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function W(){const t=new CustomEvent(I);document.dispatchEvent(t)}function F(t,e,n,{discrete:s}){const r=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),s?V(r,i):r.dispatchEvent(i)}var ne="VisuallyHidden",j=o.forwardRef((t,e)=>P.jsx(N.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));j.displayName=ne;var le=j;function ue(t){const e=t+"CollectionProvider",[n,s]=z(e),[r,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),d=y=>{const{scope:f,children:h}=y,v=R.useRef(null),E=R.useRef(new Map).current;return P.jsx(r,{scope:f,itemMap:E,collectionRef:v,children:h})};d.displayName=e;const u=t+"CollectionSlot",C=R.forwardRef((y,f)=>{const{scope:h,children:v}=y,E=i(u,h),p=O(f,E.collectionRef);return P.jsx(_,{ref:p,children:v})});C.displayName=u;const a=t+"CollectionItemSlot",l="data-radix-collection-item",D=R.forwardRef((y,f)=>{const{scope:h,children:v,...E}=y,p=R.useRef(null),x=O(f,p),b=i(a,h);return R.useEffect(()=>(b.itemMap.set(p,{ref:p,...E}),()=>void b.itemMap.delete(p))),P.jsx(_,{[l]:"",ref:x,children:v})});D.displayName=a;function m(y){const f=i(t+"CollectionConsumer",y);return R.useCallback(()=>{const v=f.collectionRef.current;if(!v)return[];const E=Array.from(v.querySelectorAll(`[${l}]`));return Array.from(f.itemMap.values()).sort((b,w)=>E.indexOf(b.ref.current)-E.indexOf(w.ref.current))},[f.collectionRef,f.itemMap])}return[{Provider:d,Slot:C,ItemSlot:D},m,s]}var se=o.createContext(void 0);function de(t){const e=o.useContext(se);return t||e||"ltr"}export{J as D,le as R,j as V,ce as a,ue as c,de as u};
