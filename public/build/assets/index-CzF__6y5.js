import{r as x,j as e,L as T,$ as i,S as r}from"./app-DVolXm_H.js";import{A as D}from"./app-layout-BGMCOdRm.js";import{B as l}from"./button-DbKjlMrn.js";import{I as B}from"./input-BqT_-I7N.js";import{H as F}from"./heading-small-CrP9WFqi.js";import{B as _}from"./badge-6e0qjOlb.js";import{C as I,a as M,b as E,d as V,e as H}from"./card-BM4_Yqij.js";import{P as L}from"./pagination-YELyK-75.js";import{S as p,a as u,b as j,c as g,d as n}from"./select-D0xov34E.js";import{D as Q,a as k,b as R,c}from"./sonner-CEinsP_z.js";import{F as v}from"./PlusIcon-CtjB7yF0.js";import{F as X}from"./MagnifyingGlassIcon-Bynw3UZb.js";import{E as $}from"./ellipsis-vertical-BCJ8oV39.js";import{E as z}from"./eye-CG6ggOtV.js";import{P as A}from"./pencil-CWByr8eo.js";import{T as q}from"./trash-CJXGobzR.js";import"./index-_mtVRR73.js";import"./index-C7NGfonP.js";import"./index-CW0FACpT.js";import"./app-logo-icon-CCGXo8xc.js";import"./list-CcDTc0Y3.js";import"./store-CV19H3N4.js";import"./breadcrumb-Co9X1bHK.js";import"./chevron-right-C1IPqF67.js";import"./chevron-left-BpKklFH9.js";import"./ellipsis-CgWpl1Pe.js";import"./index-Bh82dGG3.js";import"./chevron-down-B2stwFhm.js";import"./index-BG5QGlun.js";function we({blocks:a,filters:t,locations:o}){const[d,m]=x.useState(t.search||""),[f,h]=x.useState(!1),N=s=>{s.preventDefault(),r.get(route("blocks.index"),{...t,search:d},{preserveState:!0})},w=s=>{r.get(route("blocks.index"),{...t,location:s==="all"?"":s},{preserveState:!0})},C=s=>{r.get(route("blocks.index"),{...t,status:s},{preserveState:!0})},S=()=>{m(""),r.get(route("blocks.index"),{},{preserveState:!0})},y=s=>{r.get(route("blocks.index"),{...t,page:s},{preserveState:!0})},b=s=>{r.get(route("blocks.index"),{...t,per_page:s},{preserveState:!0})},P=s=>{confirm("Bạn có chắc chắn muốn xóa block này và tất cả các mục trong đó?")&&(h(!0),r.delete(route("blocks.destroy",s),{onFinish:()=>h(!1)}))};return e.jsxs(D,{children:[e.jsx(T,{title:"Quản lý Block"}),e.jsxs("div",{className:"space-y-6 px-4 py-6",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b",children:[e.jsx(F,{title:"Quản lý Block",description:"Tạo và quản lý các khối nội dung tùy chỉnh trên trang web"}),e.jsx(l,{asChild:!0,children:e.jsxs(i,{href:route("blocks.create"),children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Thêm Block Mới"]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsx("form",{onSubmit:N,className:"flex-1 max-w-sm",children:e.jsxs("div",{className:"relative flex items-center",children:[e.jsx(X,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500 dark:text-gray-400"}),e.jsx(B,{type:"search",placeholder:"Tìm kiếm block...",className:"pl-8",value:d,onChange:s=>m(s.target.value)}),e.jsx(l,{type:"submit",size:"sm",variant:"ghost",className:"absolute right-0",children:"Tìm"})]})}),o.length>0&&e.jsxs(p,{value:t.location||"all",onValueChange:s=>w(s),children:[e.jsx(u,{className:"w-[180px]",children:e.jsx(j,{placeholder:"Vị trí"})}),e.jsxs(g,{children:[e.jsx(n,{value:"all",children:"Tất cả vị trí"}),o.map(s=>e.jsx(n,{value:s,children:s},s))]})]}),e.jsxs(p,{value:t.status||"all",onValueChange:s=>C(s==="all"?null:s),children:[e.jsx(u,{className:"w-[150px]",children:e.jsx(j,{placeholder:"Trạng thái"})}),e.jsxs(g,{children:[e.jsx(n,{value:"all",children:"Tất cả"}),e.jsx(n,{value:"active",children:"Hoạt động"}),e.jsx(n,{value:"inactive",children:"Ẩn"})]})]}),(t.search||t.location||t.status)&&e.jsx(l,{variant:"ghost",onClick:S,children:"Xóa bộ lọc"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.data.length===0?e.jsxs("div",{className:"col-span-full text-center py-12 text-muted-foreground",children:[e.jsx("p",{className:"mb-4",children:"Không tìm thấy block nào."}),e.jsx(l,{asChild:!0,children:e.jsxs(i,{href:route("blocks.create"),children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Thêm Block Mới"]})})]}):a.data.map(s=>e.jsxs(I,{className:"overflow-hidden",children:[e.jsx(M,{className:"pb-2",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-lg",children:s.name}),s.location&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Vị trí: ",s.location]})]}),e.jsx(_,{variant:s.is_active?"default":"secondary",children:s.is_active?"Hoạt động":"Ẩn"})]})}),e.jsxs(V,{className:"pb-2",children:[s.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[e.jsxs("div",{className:"text-xs px-2 py-1 bg-muted rounded-md",children:[s.items_count," mục"]}),e.jsxs("div",{className:"text-xs px-2 py-1 bg-muted rounded-md",children:["Slug: ",s.slug]})]})]}),e.jsxs(H,{className:"flex justify-between pt-2",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Cập nhật: ",new Date(s.updated_at).toLocaleDateString()]}),e.jsxs(Q,{children:[e.jsx(k,{asChild:!0,children:e.jsxs(l,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Mở menu"}),e.jsx($,{className:"h-4 w-4"})]})}),e.jsxs(R,{align:"end",children:[e.jsx(c,{asChild:!0,children:e.jsxs(i,{href:route("blocks.show",s.id),className:"cursor-pointer",children:[e.jsx(z,{className:"mr-2 h-4 w-4"})," Xem chi tiết"]})}),e.jsx(c,{asChild:!0,children:e.jsxs(i,{href:route("blocks.edit",s.id),className:"cursor-pointer",children:[e.jsx(A,{className:"mr-2 h-4 w-4"})," Chỉnh sửa"]})}),e.jsxs(c,{className:"text-destructive focus:text-destructive cursor-pointer",onClick:()=>P(s.id),disabled:f,children:[e.jsx(q,{className:"mr-2 h-4 w-4"})," Xóa"]})]})]})]})]},s.id))}),a.meta&&e.jsx("div",{className:"mt-6 border-t pt-6",children:e.jsx(L,{currentPage:a.meta.current_page,lastPage:a.meta.last_page,perPage:parseInt(t.per_page||"10"),total:a.meta.total,from:a.meta.from||0,to:a.meta.to||0,onPageChange:y,onPerPageChange:b})})]})]})}export{we as default};
