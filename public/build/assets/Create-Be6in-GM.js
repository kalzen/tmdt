import{m as W,r as T,j as e,L as Q,$ as J}from"./app-DVolXm_H.js";import{_ as a}from"./translate-CmK6Bi0q.js";import{A as X}from"./app-layout-BGMCOdRm.js";import{B as V}from"./button-DbKjlMrn.js";import{I as m}from"./input-BqT_-I7N.js";import{L as l}from"./label-BbBB_dkE.js";import{T as P}from"./textarea-B0P-i12b.js";import{C as N,a as y,b as C,c as b,d as S}from"./card-BM4_Yqij.js";import{T as Y,a as Z,b as w,c as k}from"./tabs-DHy3rOEv.js";import{S as R}from"./switch-4TpfPNi4.js";import{S as ee,a as se,b as ae,c as ie,d as te}from"./select-D0xov34E.js";import{I as re}from"./image-uploader-DO1pPgw5.js";import{C as A}from"./checkbox-CH4-Vrfq.js";import{C as de,R as le,a as ne}from"./combobox-C-dUHp_b.js";import{H as ce}from"./heading-small-CrP9WFqi.js";import{I as c}from"./input-error-B90JfMxQ.js";import{C as oe}from"./chevron-down-B2stwFhm.js";import{C as me}from"./chevron-right-C1IPqF67.js";import"./sonner-CEinsP_z.js";import"./index-_mtVRR73.js";import"./index-C7NGfonP.js";import"./index-CW0FACpT.js";import"./index-BG5QGlun.js";import"./app-logo-icon-CCGXo8xc.js";import"./list-CcDTc0Y3.js";import"./store-CV19H3N4.js";import"./breadcrumb-Co9X1bHK.js";import"./index-Bh82dGG3.js";import"./PencilIcon-3FGGf-Tn.js";import"./search-CYjSE0ST.js";import"./popover-DRUTqp0_.js";const he=({items:I,selectedIds:L,onSelect:u,primaryCatalogueId:F,setPrimaryCatalogue:$})=>{const[r,d]=T.useState({}),E=t=>{d(o=>({...o,[t]:!o[t]}))},x=(t,o=0)=>{const g=t.children&&t.children.length>0,h=r[t.id]||!1,j=L.includes(t.id.toString()),M=F===t.id.toString(),_=o===0?"":`pl-${o*6}`;return e.jsxs("div",{className:"catalogue-item",children:[e.jsxs("div",{className:`flex items-center py-1 ${_}`,children:[e.jsx("div",{className:"flex-shrink-0 w-6",children:g?e.jsx(V,{type:"button",variant:"ghost",size:"sm",className:"p-0 h-5 w-5",onClick:()=>E(t.id),children:h?e.jsx(oe,{className:"h-4 w-4"}):e.jsx(me,{className:"h-4 w-4"})}):null}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{id:`cat-${t.id}`,checked:j,onCheckedChange:p=>u(t.id.toString(),!!p)}),e.jsx(l,{htmlFor:`cat-${t.id}`,className:"cursor-pointer",children:t.name}),j&&e.jsxs("div",{className:"ml-2",children:[e.jsx("input",{type:"radio",id:`primary-${t.id}`,name:"primary_catalogue",className:"mr-1",checked:M,onChange:()=>$(t.id.toString())}),e.jsx("label",{htmlFor:`primary-${t.id}`,className:"text-xs text-muted-foreground cursor-pointer",children:"Primary"})]})]})]}),g&&h&&e.jsx("div",{className:"catalogue-children",children:t.children.map(p=>x(p,o+1))})]},t.id)};return e.jsx("div",{className:"catalogue-tree",children:I.map(t=>x(t))})};function Oe({catalogues:I,catalogueTree:L,stores:u,attributes:F,defaultStoreId:$}){const{data:r,setData:d,post:E,processing:x,errors:t,reset:o}=W({title:"",sku:"",description:"",content:"",price:"",sale_price:"",stock_quantity:"0",catalogue_id:"",catalogue_ids:[],store_id:$?$.toString():"",is_active:!0,is_featured:!1,meta_title:"",meta_description:"",thumbnail:null,gallery:[],attributes:{}}),[g,h]=T.useState([]),[j,M]=T.useState(""),[_,p]=T.useState("tree"),U=[{title:a("admin.products","Products"),href:route("products.index")},{title:a("admin.create_product","Create Product"),href:route("products.create")}],O=s=>{s.preventDefault(),j&&d("content",j),E(route("products.store"),{forceFormData:!0,onSuccess:()=>{o(),h([]),M("")}})},H=s=>{h(s),d("gallery",s)},v=(s,i)=>{d("attributes",{...r.attributes,[s]:i})},q=(s,i)=>{let n=[...r.catalogue_ids];i?(n.push(s),r.catalogue_id===""&&d("catalogue_id",s)):(n=n.filter(D=>D!==s),r.catalogue_id===s&&n.length>0?d("catalogue_id",n[0]):n.length===0&&d("catalogue_id","")),d("catalogue_ids",n)},B=s=>{d("catalogue_id",s)},G=u.map(s=>({value:s.id.toString(),label:s.name}));return u.length>1&&G.unshift({value:"",label:a("admin.none","None")}),e.jsxs(X,{breadcrumbs:U,children:[e.jsx(Q,{title:a("admin.create_product","Create Product")}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(ce,{title:a("admin.create_product","Create Product"),description:a("admin.create_product_description","Add a new product to your store")})}),e.jsxs("form",{onSubmit:O,className:"space-y-6",children:[e.jsxs(Y,{defaultValue:"general",className:"w-full",children:[e.jsxs(Z,{className:"mb-4",children:[e.jsx(w,{value:"general",children:a("admin.general","General")}),e.jsx(w,{value:"data",children:a("admin.data","Data")}),e.jsx(w,{value:"media",children:a("admin.media","Media")}),e.jsx(w,{value:"attributes",children:a("admin.attributes","Attributes")}),e.jsx(w,{value:"seo",children:a("admin.seo","SEO")})]}),e.jsx(k,{value:"general",children:e.jsxs(N,{children:[e.jsxs(y,{children:[e.jsx(C,{children:a("admin.general_information","General Information")}),e.jsx(b,{children:a("admin.general_information_description","Basic product information")})]}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(l,{htmlFor:"title",children:[a("admin.product_title","Product Title")," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(m,{id:"title",value:r.title,onChange:s=>d("title",s.target.value),placeholder:a("admin.product_title_placeholder","Enter product title")}),e.jsx(c,{message:t.title})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"sku",children:a("admin.sku","SKU")}),e.jsx(m,{id:"sku",value:r.sku,onChange:s=>d("sku",s.target.value),placeholder:a("admin.sku_placeholder","Product Stock Keeping Unit")}),e.jsx(c,{message:t.sku})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"description",children:a("admin.short_description","Short Description")}),e.jsx(P,{id:"description",value:r.description,onChange:s=>d("description",s.target.value),placeholder:a("admin.short_description_placeholder","Brief description for product listings"),rows:3}),e.jsx(c,{message:t.description})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"content",children:a("admin.full_description","Full Description")}),e.jsx(P,{id:"content",value:r.content,onChange:s=>d("content",s.target.value),placeholder:a("admin.full_description_placeholder","Detailed product description"),rows:6}),e.jsx(c,{message:t.content})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(l,{htmlFor:"catalogue_id",children:[a("admin.catalogue","Catalogue")," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("button",{type:"button",className:`px-2 py-1 rounded ${_==="tree"?"bg-primary text-white":"bg-muted"}`,onClick:()=>p("tree"),children:"Tree View"}),e.jsx("button",{type:"button",className:`px-2 py-1 rounded ${_==="flat"?"bg-primary text-white":"bg-muted"}`,onClick:()=>p("flat"),children:"Flat View"})]})]}),e.jsx("div",{className:"border rounded-md p-4 max-h-[300px] overflow-y-auto",children:_==="tree"?e.jsx(he,{items:L,selectedIds:r.catalogue_ids,onSelect:q,primaryCatalogueId:r.catalogue_id,setPrimaryCatalogue:B}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:I.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{id:`catalogue-${s.id}`,checked:r.catalogue_ids.includes(s.id.toString()),onCheckedChange:i=>{q(s.id.toString(),!!i)}}),e.jsx(l,{htmlFor:`catalogue-${s.id}`,children:s.name}),r.catalogue_ids.includes(s.id.toString())&&e.jsxs("div",{className:"ml-2",children:[e.jsx("input",{type:"radio",id:`primary-${s.id}`,name:"primary_catalogue",className:"mr-1",checked:r.catalogue_id===s.id.toString(),onChange:()=>B(s.id.toString())}),e.jsx("label",{htmlFor:`primary-${s.id}`,className:"text-xs text-muted-foreground",children:"Primary"})]})]},s.id))})}),e.jsx("div",{className:"text-sm text-muted-foreground",children:a("admin.select_multiple_catalogues","Select one or more catalogues for this product")}),e.jsx(c,{message:t.catalogue_ids||t.catalogue_id})]}),u.length>0&&e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"store_id",children:a("admin.store","Store")}),e.jsx(de,{options:G,value:r.store_id,onChange:s=>d("store_id",s),placeholder:a("admin.select_store","Select store"),emptyMessage:a("admin.no_stores_found","No stores found"),className:"w-full"}),e.jsx(c,{message:t.store_id})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{id:"is_active",checked:r.is_active,onCheckedChange:s=>d("is_active",s)}),e.jsx(l,{htmlFor:"is_active",children:a("admin.is_active","Active")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{id:"is_featured",checked:r.is_featured,onCheckedChange:s=>d("is_featured",s)}),e.jsx(l,{htmlFor:"is_featured",children:a("admin.is_featured","Featured Product")})]})]})]})}),e.jsx(k,{value:"data",children:e.jsxs(N,{children:[e.jsxs(y,{children:[e.jsx(C,{children:a("admin.product_data","Product Data")}),e.jsx(b,{children:a("admin.product_data_description","Price and inventory information")})]}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(l,{htmlFor:"price",children:[a("admin.price","Price")," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(m,{id:"price",type:"number",min:"0",step:"0.01",value:r.price,onChange:s=>d("price",s.target.value),placeholder:"0.00"}),e.jsx(c,{message:t.price})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"sale_price",children:a("admin.sale_price","Sale Price")}),e.jsx(m,{id:"sale_price",type:"number",min:"0",step:"0.01",value:r.sale_price,onChange:s=>d("sale_price",s.target.value),placeholder:"0.00"}),e.jsx(c,{message:t.sale_price})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(l,{htmlFor:"stock_quantity",children:[a("admin.stock_quantity","Stock Quantity")," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(m,{id:"stock_quantity",type:"number",min:"0",step:"1",value:r.stock_quantity,onChange:s=>d("stock_quantity",s.target.value),placeholder:"0"}),e.jsx(c,{message:t.stock_quantity})]})]})]})}),e.jsx(k,{value:"media",children:e.jsxs(N,{children:[e.jsxs(y,{children:[e.jsx(C,{children:a("admin.product_media","Product Media")}),e.jsx(b,{children:a("admin.product_media_description","Product images and gallery")})]}),e.jsxs(S,{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsx(l,{children:a("admin.thumbnail","Thumbnail Image")}),e.jsx(re,{id:"thumbnail",onChange:s=>d("thumbnail",s),title:a("admin.thumbnail_image","Thumbnail Image"),description:a("admin.thumbnail_description","Main product image"),error:t.thumbnail,helpText:a("admin.image_help_text","Recommended size: 800x800px, Max 2MB"),placeholder:"/assets/placeholders/product.png",className:"w-full h-60",previewClassName:"w-full h-60 object-contain"})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsx(l,{children:a("admin.gallery","Product Gallery")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"border-2 border-dashed rounded-md p-6 flex flex-col items-center justify-center cursor-pointer hover:border-primary/50",children:[e.jsx("input",{type:"file",id:"gallery",multiple:!0,className:"hidden",accept:"image/*",onChange:s=>{s.target.files&&H(Array.from(s.target.files))}}),e.jsx(l,{htmlFor:"gallery",className:"cursor-pointer text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-full bg-primary/10",children:e.jsx("svg",{className:"w-6 h-6 text-primary",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),e.jsx("span",{className:"text-sm font-medium",children:a("admin.add_images","Add Images")}),e.jsx("span",{className:"text-xs text-muted-foreground",children:a("admin.up_to_5_images","Up to 5 images, max 2MB each")})]})})]}),g.map((s,i)=>e.jsxs("div",{className:"relative border rounded-md overflow-hidden",children:[e.jsx("img",{src:URL.createObjectURL(s),alt:`Gallery image ${i+1}`,className:"w-full h-32 object-cover"}),e.jsx("button",{type:"button",className:"absolute top-2 right-2 bg-destructive text-white p-1 rounded-full",onClick:()=>{const n=[...g];n.splice(i,1),h(n),d("gallery",n)},children:e.jsx("svg",{className:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},i))]}),e.jsx(c,{message:t.gallery})]})]})]})}),e.jsx(k,{value:"attributes",children:e.jsxs(N,{children:[e.jsxs(y,{children:[e.jsx(C,{children:a("admin.product_attributes","Product Attributes")}),e.jsx(b,{children:a("admin.product_attributes_description","Define product specifications and features")})]}),e.jsx(S,{children:e.jsx("div",{className:"space-y-6",children:F.length===0?e.jsx("p",{className:"text-muted-foreground text-center py-4",children:a("admin.no_attributes_defined","No attributes have been defined yet.")}):F.map(s=>e.jsxs("div",{className:"border rounded-md p-4",children:[e.jsxs("h3",{className:"font-medium mb-2",children:[s.name,s.is_required&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),s.type==="text"&&e.jsx(m,{placeholder:`Enter ${s.name.toLowerCase()}`,value:r.attributes[s.id]||"",onChange:i=>v(s.id,i.target.value)}),s.type==="textarea"&&e.jsx(P,{placeholder:`Enter ${s.name.toLowerCase()}`,value:r.attributes[s.id]||"",onChange:i=>v(s.id,i.target.value),rows:3}),s.type==="select"&&e.jsxs(ee,{value:r.attributes[s.id]||"",onValueChange:i=>v(s.id,i),children:[e.jsx(se,{children:e.jsx(ae,{placeholder:`Select ${s.name.toLowerCase()}`})}),e.jsx(ie,{children:s.values.map(i=>e.jsx(te,{value:i.id.toString(),children:i.value},i.id))})]}),s.type==="multiselect"&&e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.values.map(i=>{const n=r.attributes[s.id]||[],D=n.includes(i.id.toString());return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{id:`attr-${s.id}-${i.id}`,checked:D,onCheckedChange:z=>{let f=[...n];z?f.includes(i.id.toString())||f.push(i.id.toString()):f=f.filter(K=>K!==i.id.toString()),v(s.id,f)}}),e.jsx(l,{htmlFor:`attr-${s.id}-${i.id}`,children:i.value})]},i.id)})}),s.type==="radio"&&e.jsx(le,{value:r.attributes[s.id]||"",onValueChange:i=>v(s.id,i),children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.values.map(i=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ne,{value:i.id.toString(),id:`attr-${s.id}-${i.id}`}),e.jsx(l,{htmlFor:`attr-${s.id}-${i.id}`,children:i.value})]},i.id))})})]},s.id))})})]})}),e.jsx(k,{value:"seo",children:e.jsxs(N,{children:[e.jsxs(y,{children:[e.jsx(C,{children:a("admin.seo_information","SEO Information")}),e.jsx(b,{children:a("admin.seo_information_description","Search engine optimization details")})]}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"meta_title",children:a("admin.meta_title","Meta Title")}),e.jsx(m,{id:"meta_title",value:r.meta_title,onChange:s=>d("meta_title",s.target.value),placeholder:a("admin.meta_title_placeholder","SEO meta title")}),e.jsx(c,{message:t.meta_title})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"meta_description",children:a("admin.meta_description","Meta Description")}),e.jsx(P,{id:"meta_description",value:r.meta_description,onChange:s=>d("meta_description",s.target.value),placeholder:a("admin.meta_description_placeholder","SEO meta description"),rows:3}),e.jsx(c,{message:t.meta_description})]})]})]})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(V,{type:"submit",disabled:x,children:x?a("admin.saving","Saving..."):a("admin.save_product","Save Product")}),e.jsx(J,{href:route("products.index"),children:e.jsx(V,{variant:"outline",type:"button",children:a("admin.cancel","Cancel")})})]})]})]})]})}export{Oe as default};
