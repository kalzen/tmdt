import{r as d,j as e,L as D,S as n,$ as _}from"./app-DVolXm_H.js";import{A as L}from"./app-layout-BGMCOdRm.js";import{B as m}from"./button-DbKjlMrn.js";import{I as E}from"./input-BqT_-I7N.js";import{T as F,a as P,b as p,c as i,d as B,e as r}from"./table-Dk2pM1H_.js";import{B as I}from"./badge-6e0qjOlb.js";import{S as x,a as u,b as j,c as g,d as c}from"./select-D0xov34E.js";import{C as V}from"./custom-pagination-M5ZIhdPM.js";import{H}from"./heading-small-CrP9WFqi.js";import{D as q,a as U,b as z,c as Q}from"./sonner-CEinsP_z.js";import{E as R}from"./ellipsis-CgWpl1Pe.js";import{E as $}from"./eye-CG6ggOtV.js";import"./index-_mtVRR73.js";import"./index-C7NGfonP.js";import"./index-CW0FACpT.js";import"./app-logo-icon-CCGXo8xc.js";import"./list-CcDTc0Y3.js";import"./store-CV19H3N4.js";import"./breadcrumb-Co9X1bHK.js";import"./chevron-right-C1IPqF67.js";import"./index-Bh82dGG3.js";import"./chevron-down-B2stwFhm.js";import"./index-BG5QGlun.js";import"./pagination-YELyK-75.js";import"./chevron-left-BpKklFH9.js";function ge({logs:a,filters:s,actions:v}){const[h,y]=d.useState(s.search||""),[S,f]=d.useState(s.model||""),[b,N]=d.useState(s.action||""),w=[{title:"Activity Logs",href:route("activity-logs.index")}],C=t=>{t.preventDefault(),l({search:h})},A=t=>{f(t),l({model:t})},M=t=>{N(t),l({action:t})},l=t=>{n.get(route("activity-logs.index"),{...s,...t,page:1},{preserveState:!0})},T=(()=>{const t=[];return a.data.forEach(o=>{o.model_type&&!t.includes(o.model_type)&&t.push(o.model_type)}),t})();return e.jsxs(L,{breadcrumbs:w,children:[e.jsx(D,{title:"Activity Logs"}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(H,{title:"Activity Logs",description:"View system activity logs"})}),e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsx("form",{onSubmit:C,className:"flex-1 max-w-sm",children:e.jsxs("div",{className:"relative flex items-center",children:[e.jsx(E,{type:"search",placeholder:"Search logs...",className:"pl-4 pr-12",value:h,onChange:t=>y(t.target.value)}),e.jsx(m,{type:"submit",size:"sm",variant:"ghost",className:"absolute right-0",children:"Search"})]})}),e.jsxs(x,{value:S,onValueChange:A,children:[e.jsx(u,{className:"w-[180px]",children:e.jsx(j,{placeholder:"Filter by model"})}),e.jsxs(g,{children:[e.jsx(c,{value:"",children:"All Models"}),T.map(t=>e.jsx(c,{value:t,children:t.replace("App\\Models\\","")},t))]})]}),e.jsxs(x,{value:b,onValueChange:M,children:[e.jsx(u,{className:"w-[180px]",children:e.jsx(j,{placeholder:"Filter by action"})}),e.jsxs(g,{children:[e.jsx(c,{value:"",children:"All Actions"}),v.map(t=>e.jsx(c,{value:t,children:t},t))]})]}),(s.search||s.model||s.action)&&e.jsx(m,{variant:"ghost",onClick:()=>n.get(route("activity-logs.index"),{}),children:"Clear filters"})]}),e.jsx("div",{className:"border rounded-md",children:e.jsxs(F,{children:[e.jsx(P,{children:e.jsxs(p,{children:[e.jsx(i,{children:"User"}),e.jsx(i,{children:"Action"}),e.jsx(i,{children:"Model"}),e.jsx(i,{children:"Description"}),e.jsx(i,{children:"Date"}),e.jsx(i,{className:"text-right",children:"Actions"})]})}),e.jsx(B,{children:a.data.length===0?e.jsx(p,{children:e.jsx(r,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"No activity logs found."})}):a.data.map(t=>e.jsxs(p,{children:[e.jsx(r,{children:t.user_name}),e.jsx(r,{children:e.jsx(I,{variant:t.action==="created"?"success":t.action==="updated"?"warning":t.action==="deleted"?"destructive":"outline",children:t.action})}),e.jsx(r,{children:t.model_type.replace("App\\Models\\","")}),e.jsx(r,{className:"max-w-md truncate",children:t.description}),e.jsx(r,{children:new Date(t.created_at).toLocaleString()}),e.jsx(r,{className:"text-right",children:e.jsxs(q,{children:[e.jsx(U,{asChild:!0,children:e.jsxs(m,{variant:"ghost",size:"icon",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsx(z,{align:"end",children:e.jsx(Q,{asChild:!0,children:e.jsxs(_,{href:route("activity-logs.show",t.id),children:[e.jsx($,{className:"h-4 w-4 mr-2"})," View Details"]})})})]})})]},t.id))})]})}),a&&a.data&&a.data.length>0&&e.jsx("div",{className:"mt-4 border-t pt-4",children:e.jsx(V,{currentPage:a.meta.current_page,lastPage:a.meta.last_page,perPage:parseInt(s.per_page||"15"),total:a.meta.total,from:a.meta.from,to:a.meta.to,onPageChange:t=>{n.get(route("activity-logs.index"),{...s,page:t},{preserveState:!0,preserveScroll:!0})},onPerPageChange:t=>{n.get(route("activity-logs.index"),{...s,per_page:t,page:1},{preserveState:!0})}})})]})]})}export{ge as default};
