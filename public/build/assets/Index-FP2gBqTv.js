import{r as p,j as e,L as $,$ as j,S as d}from"./app-B-84GseX.js";import{H as q}from"./heading-small-fuH_0C23.js";import{A as Q,D as g,a as f,b as v,c as i}from"./app-layout-DtGowkgQ.js";import{B as c}from"./app-logo-icon-DR8hw6aZ.js";import{I as K}from"./input-Cre6IN-k.js";import{P as O}from"./pagination-Cobvq3Ig.js";import{T as U,a as V,b as N,c as l,d as X,e as n}from"./table-Dl1mLuaT.js";import{B as G}from"./badge-luecMNZk.js";import{_ as a}from"./translate-LEhgYJiH.js";import{f as w}from"./helpers-CZMM21Pc.js";import{C as J}from"./circle-x-BKY1HCgK.js";import{I as W}from"./image-2fNvyz7p.js";import{E as Y}from"./ellipsis-D3NLvM7m.js";import{E as Z}from"./eye-C8p3K33S.js";import{P as ee}from"./pencil-BOAeLuaA.js";import{T as se}from"./trash-2-CJv07cBr.js";import"./index-BeMZBMLQ.js";import"./index-vnsyDsqF.js";import"./select-U5iU8k38.js";import"./index-BBt4VV9G.js";import"./chevron-down-C4kc6uCx.js";import"./chevron-left-Ccu_SHCc.js";function Ce({products:I,catalogues:k,filters:o}){var A;const t=I||{data:[],meta:{current_page:1,from:0,last_page:1,per_page:10,to:0,total:0}},_=k||[],r=o||{},T=Array.isArray(_)?_:[],[y,D]=p.useState(r.search||""),[C,B]=p.useState(r.catalogue_id||""),[b,E]=p.useState(r.status||""),M=[{title:a("admin.products","Products"),href:route("products.index")}],R=s=>{s.preventDefault(),u({search:y})},S=s=>{B(s),u({catalogue_id:s})},x=s=>{E(s),u({status:s})},u=s=>{d.get(route("products.index"),{...r,...s,page:1},{preserveState:!0,replace:!0})},z=s=>{d.get(route("products.index"),{...r,page:s},{preserveState:!0})},L=s=>{d.get(route("products.index"),{...r,per_page:s},{preserveState:!0})},h=T.map(s=>{const m=s.level||0,F=m>0?"â€”".repeat(m)+" ":"";return{id:s.id,name:F+s.name}}),H=(s,m)=>{confirm(`Are you sure you want to delete "${m}"?`)&&d.delete(route("products.destroy",s))},P=Array.isArray(t.data)?t.data:[];return e.jsxs(Q,{breadcrumbs:M,children:[e.jsx($,{title:a("admin.products","Products")}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{title:a("admin.products","Products"),description:a("admin.products_description","Manage your products inventory")}),e.jsx(j,{href:route("products.create"),children:e.jsx(c,{children:a("admin.create_product","Create Product")})})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 items-center pb-4 border-b",children:[e.jsx("form",{onSubmit:R,className:"flex-1 min-w-[240px]",children:e.jsxs("div",{className:"relative flex items-center",children:[e.jsx(K,{type:"search",placeholder:a("admin.search_products","Search products..."),className:"pl-4 pr-12",value:y,onChange:s=>D(s.target.value)}),e.jsx(c,{type:"submit",size:"sm",variant:"ghost",className:"absolute right-0",children:a("admin.search","Search")})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.length>0&&e.jsxs(g,{children:[e.jsx(f,{asChild:!0,children:e.jsxs(c,{variant:"outline",className:"min-w-[180px] justify-between",children:[C?(A=h.find(s=>s.id.toString()===C))==null?void 0:A.name:a("admin.all_catalogues","All catalogues"),e.jsx("svg",{className:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]})}),e.jsxs(v,{align:"start",className:"w-[180px] max-h-[400px] overflow-auto",children:[e.jsx(i,{onClick:()=>S(""),children:a("admin.all_catalogues","All catalogues")}),h.map(s=>e.jsx(i,{onClick:()=>S(s.id.toString()),children:s.name},s.id))]})]}),e.jsxs(g,{children:[e.jsx(f,{asChild:!0,children:e.jsxs(c,{variant:"outline",className:"min-w-[150px] justify-between",children:[b==="active"?a("admin.active","Active"):b==="inactive"?a("admin.inactive","Inactive"):a("admin.all_statuses","All statuses"),e.jsx("svg",{className:"h-4 w-4 opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]})}),e.jsxs(v,{align:"start",className:"w-[150px]",children:[e.jsx(i,{onClick:()=>x(""),children:a("admin.all_statuses","All statuses")}),e.jsx(i,{onClick:()=>x("active"),children:a("admin.active","Active")}),e.jsx(i,{onClick:()=>x("inactive"),children:a("admin.inactive","Inactive")})]})]}),(o.search||o.catalogue_id||o.status)&&e.jsx(c,{variant:"outline",size:"icon",onClick:()=>d.get(route("products.index"),{}),title:a("admin.clear_filters","Clear filters"),children:e.jsx(J,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(U,{children:[e.jsx(V,{children:e.jsxs(N,{children:[e.jsx(l,{className:"w-[100px]",children:a("admin.image","Image")}),e.jsx(l,{children:a("admin.product","Product")}),e.jsx(l,{children:a("admin.catalogue","Catalogue")}),e.jsx(l,{className:"text-right",children:a("admin.price","Price")}),e.jsx(l,{className:"text-center",children:a("admin.stock","Stock")}),e.jsx(l,{className:"text-center",children:a("admin.status","Status")}),e.jsx(l,{className:"text-right",children:a("admin.actions","Actions")})]})}),e.jsx(X,{children:P.length===0?e.jsx(N,{children:e.jsx(n,{colSpan:7,className:"text-center text-muted-foreground py-8",children:r.search||r.catalogue_id||r.status?a("admin.no_products_found_with_filters","No products match your filters."):a("admin.no_products_found","No products found. Create your first product.")})}):P.map(s=>e.jsxs(N,{children:[e.jsx(n,{children:e.jsx("div",{className:"w-[100px] h-[100px] flex items-center justify-center",children:s.thumbnail_url?e.jsx("img",{src:s.thumbnail_url,alt:s.title,className:"max-w-[100px] max-h-[100px] object-contain"}):e.jsx("div",{className:"w-[100px] h-[100px] flex items-center justify-center bg-muted rounded-md",children:e.jsx(W,{className:"h-8 w-8 text-muted-foreground"})})})}),e.jsx(n,{className:"font-medium",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.title}),s.sku&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["SKU: ",s.sku]})]})}),e.jsx(n,{children:s.catalogue.name}),e.jsx(n,{className:"text-right",children:e.jsx("div",{className:"flex flex-col items-end",children:s.sale_price?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium",children:w(s.sale_price)}),e.jsx("span",{className:"text-xs text-muted-foreground line-through",children:w(s.price)})]}):e.jsx("span",{className:"font-medium",children:w(s.price)})})}),e.jsx(n,{className:"text-center",children:e.jsx("span",{className:s.stock_quantity<=0?"text-destructive":"",children:s.stock_quantity})}),e.jsx(n,{className:"text-center",children:e.jsx(G,{variant:s.is_active?"success":"outline",children:s.is_active?a("admin.active","Active"):a("admin.inactive","Inactive")})}),e.jsx(n,{className:"text-right",children:e.jsxs(g,{children:[e.jsx(f,{asChild:!0,children:e.jsxs(c,{variant:"ghost",size:"icon",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(v,{align:"end",children:[e.jsx(i,{asChild:!0,children:e.jsxs(j,{href:route("products.show",s.id),children:[e.jsx(Z,{className:"h-4 w-4 mr-2"})," ",a("admin.view","View")]})}),e.jsx(i,{asChild:!0,children:e.jsxs(j,{href:route("products.edit",s.id),children:[e.jsx(ee,{className:"h-4 w-4 mr-2"})," ",a("admin.edit","Edit")]})}),e.jsxs(i,{onClick:()=>H(s.id,s.title),className:"text-destructive focus:text-destructive",children:[e.jsx(se,{className:"h-4 w-4 mr-2"})," ",a("admin.delete","Delete")]})]})]})})]},s.id))})]})}),t.meta&&typeof t.meta.total=="number"&&t.meta.total>0&&e.jsx("div",{className:"mt-4 border-t pt-4",children:e.jsx(O,{currentPage:t.meta.current_page||1,lastPage:t.meta.last_page||1,perPage:parseInt(r.per_page||"10"),total:t.meta.total||0,from:t.meta.from||0,to:t.meta.to||0,onPageChange:z,onPerPageChange:L})})]})]})}export{Ce as default};
