import{r as d,j as e,L as D,S as n,$ as _}from"./app-CviGlDDy.js";import{A as L,D as E,a as F,b as P,c as B}from"./app-layout-D9mqeadP.js";import{B as m}from"./button-CLn9TqRh.js";import{I}from"./input-CJpWA2O9.js";import{T as V,a as H,b as p,c as i,d as q,e as r}from"./table-RjWlGW3X.js";import{B as U}from"./badge-DpH0NJc0.js";import{S as x,a as u,b as j,c as g,d as c}from"./select-B9B60UZ0.js";import{C as z}from"./custom-pagination-11aDN1dR.js";import{H as Q}from"./heading-small-05myq_aP.js";import{E as R}from"./ellipsis-CZ7dpYYW.js";import{E as $}from"./eye-Bjjwyhhp.js";import"./sonner-CBFdLw2j.js";import"./index-DcrmxLJM.js";import"./index-Coqoyhj1.js";import"./index-BUVTpqLt.js";import"./index-BkFTZKx5.js";import"./index-CigfzzEK.js";import"./app-logo-icon-gb4oxeO0.js";import"./list-C5lA8dfb.js";import"./store-Zms8d9yC.js";import"./breadcrumb-D_Wu7WpV.js";import"./index-CGbRmmFw.js";import"./chevron-down-B47nSwFl.js";import"./pagination-CqCmJnsD.js";import"./chevron-left-B-gto66Q.js";function ge({logs:a,filters:s,actions:v}){const[h,y]=d.useState(s.search||""),[S,f]=d.useState(s.model||""),[b,N]=d.useState(s.action||""),w=[{title:"Activity Logs",href:route("activity-logs.index")}],C=t=>{t.preventDefault(),l({search:h})},A=t=>{f(t),l({model:t})},M=t=>{N(t),l({action:t})},l=t=>{n.get(route("activity-logs.index"),{...s,...t,page:1},{preserveState:!0})},T=(()=>{const t=[];return a.data.forEach(o=>{o.model_type&&!t.includes(o.model_type)&&t.push(o.model_type)}),t})();return e.jsxs(L,{breadcrumbs:w,children:[e.jsx(D,{title:"Activity Logs"}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(Q,{title:"Activity Logs",description:"View system activity logs"})}),e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsx("form",{onSubmit:C,className:"flex-1 max-w-sm",children:e.jsxs("div",{className:"relative flex items-center",children:[e.jsx(I,{type:"search",placeholder:"Search logs...",className:"pl-4 pr-12",value:h,onChange:t=>y(t.target.value)}),e.jsx(m,{type:"submit",size:"sm",variant:"ghost",className:"absolute right-0",children:"Search"})]})}),e.jsxs(x,{value:S,onValueChange:A,children:[e.jsx(u,{className:"w-[180px]",children:e.jsx(j,{placeholder:"Filter by model"})}),e.jsxs(g,{children:[e.jsx(c,{value:"",children:"All Models"}),T.map(t=>e.jsx(c,{value:t,children:t.replace("App\\Models\\","")},t))]})]}),e.jsxs(x,{value:b,onValueChange:M,children:[e.jsx(u,{className:"w-[180px]",children:e.jsx(j,{placeholder:"Filter by action"})}),e.jsxs(g,{children:[e.jsx(c,{value:"",children:"All Actions"}),v.map(t=>e.jsx(c,{value:t,children:t},t))]})]}),(s.search||s.model||s.action)&&e.jsx(m,{variant:"ghost",onClick:()=>n.get(route("activity-logs.index"),{}),children:"Clear filters"})]}),e.jsx("div",{className:"border rounded-md",children:e.jsxs(V,{children:[e.jsx(H,{children:e.jsxs(p,{children:[e.jsx(i,{children:"User"}),e.jsx(i,{children:"Action"}),e.jsx(i,{children:"Model"}),e.jsx(i,{children:"Description"}),e.jsx(i,{children:"Date"}),e.jsx(i,{className:"text-right",children:"Actions"})]})}),e.jsx(q,{children:a.data.length===0?e.jsx(p,{children:e.jsx(r,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"No activity logs found."})}):a.data.map(t=>e.jsxs(p,{children:[e.jsx(r,{children:t.user_name}),e.jsx(r,{children:e.jsx(U,{variant:t.action==="created"?"success":t.action==="updated"?"warning":t.action==="deleted"?"destructive":"outline",children:t.action})}),e.jsx(r,{children:t.model_type.replace("App\\Models\\","")}),e.jsx(r,{className:"max-w-md truncate",children:t.description}),e.jsx(r,{children:new Date(t.created_at).toLocaleString()}),e.jsx(r,{className:"text-right",children:e.jsxs(E,{children:[e.jsx(F,{asChild:!0,children:e.jsxs(m,{variant:"ghost",size:"icon",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsx(P,{align:"end",children:e.jsx(B,{asChild:!0,children:e.jsxs(_,{href:route("activity-logs.show",t.id),children:[e.jsx($,{className:"h-4 w-4 mr-2"})," View Details"]})})})]})})]},t.id))})]})}),a&&a.data&&a.data.length>0&&e.jsx("div",{className:"mt-4 border-t pt-4",children:e.jsx(z,{currentPage:a.meta.current_page,lastPage:a.meta.last_page,perPage:parseInt(s.per_page||"15"),total:a.meta.total,from:a.meta.from,to:a.meta.to,onPageChange:t=>{n.get(route("activity-logs.index"),{...s,page:t},{preserveState:!0,preserveScroll:!0})},onPerPageChange:t=>{n.get(route("activity-logs.index"),{...s,per_page:t,page:1},{preserveState:!0})}})})]})]})}export{ge as default};
