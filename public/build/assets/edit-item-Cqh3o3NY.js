import{r as m,j as e,L as q,$ as f,S as A}from"./app-BXEVKu8S.js";import{A as X}from"./app-layout-FUQVz8B4.js";import{B as j}from"./app-logo-icon-eA7Sa6_S.js";import{I as d}from"./input-DYl2xwC_.js";import{T as _}from"./textarea-CsY74LC2.js";import{L as r}from"./label-BVOHeh7i.js";import{S as z}from"./switch-De6D8s_r.js";import{S as y,a as C,b as S,c as w,d as F}from"./select-0bjdaqSH.js";import{C as Q,a as U,b as G,c as J,d as W,e as Y}from"./card-CUhvS6T_.js";import{H as Z}from"./heading-small-CJkaQd_g.js";import{F as ee}from"./ArrowLeftIcon-CfEyuvKB.js";import"./index-BVUcwr4W.js";import"./index-DqbdpqtQ.js";import"./index-Bnnw5rqN.js";import"./chevron-down-CDMMiKSJ.js";function je({block:h,item:i,availableTypes:L,buttonTypes:T,imagePositions:k,imageUrl:u}){const[a,x]=m.useState({...i}),[g,I]=m.useState(null),[b,V]=m.useState(u||null),[t,E]=m.useState({}),[v,p]=m.useState(!1),l=s=>{const{name:n,value:c}=s.target;x(o=>({...o,[n]:c}))},D=s=>{x(n=>({...n,is_active:s}))},N=(s,n)=>{x(c=>({...c,[s]:n}))},H=s=>{var c;const n=(c=s.target.files)==null?void 0:c[0];n&&(I(n),V(URL.createObjectURL(n)))},P=s=>{s.preventDefault(),p(!0);const n=new FormData;Object.entries(a).forEach(([c,o])=>{o!=null&&n.append(c,typeof o=="boolean"?o?"1":"0":String(o))}),g&&n.append("image",g),A.post(route("block-items.update",i.id),n,{onSuccess:()=>{p(!1)},onError:c=>{E(c),p(!1)}})},R=["title","title_description","full"].includes(i.type),$=["description","title_description","full"].includes(i.type),K=["content","image_content","full"].includes(i.type),O=["button","full"].includes(i.type),B=["image","image_content","full"].includes(i.type),M=["image_content","full"].includes(i.type);return e.jsxs(X,{children:[e.jsx(q,{title:`Chỉnh sửa mục: ${i.name||i.title||"Không có tiêu đề"}`}),e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(j,{variant:"outline",size:"sm",asChild:!0,className:"mr-4",children:e.jsxs(f,{href:route("blocks.edit",h.id),children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Quay lại"]})}),e.jsx(Z,{title:`Chỉnh sửa mục: ${i.name||i.title||"Không có tiêu đề"}`,description:`Trong block: ${h.name}`})]}),e.jsx(Q,{children:e.jsxs("form",{onSubmit:P,children:[e.jsxs(U,{children:[e.jsx(G,{children:"Thông tin mục"}),e.jsx(J,{children:"Chỉnh sửa thông tin mục trong block"})]}),e.jsxs(W,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"type",children:"Loại mục"}),e.jsx(d,{id:"type",value:L[i.type]||i.type,disabled:!0,className:"bg-muted"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Không thể thay đổi loại mục sau khi đã tạo"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"name",children:"Tên hiển thị (quản trị)"}),e.jsx(d,{id:"name",name:"name",value:a.name||"",onChange:l,placeholder:"Tên dành cho quản trị (không hiển thị frontend)"})]}),R&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"title",children:"Tiêu đề"}),e.jsx(d,{id:"title",name:"title",value:a.title||"",onChange:l,placeholder:"Tiêu đề hiển thị",className:t.title?"border-destructive":""}),t.title&&e.jsx("p",{className:"text-destructive text-sm",children:t.title})]}),$&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"description",children:"Mô tả"}),e.jsx(_,{id:"description",name:"description",value:a.description||"",onChange:l,placeholder:"Mô tả ngắn",rows:3,className:t.description?"border-destructive":""}),t.description&&e.jsx("p",{className:"text-destructive text-sm",children:t.description})]}),K&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"content",children:"Nội dung"}),e.jsx(_,{id:"content",name:"content",value:a.content||"",onChange:l,placeholder:"Nội dung chi tiết",rows:8,className:t.content?"border-destructive":""}),t.content&&e.jsx("p",{className:"text-destructive text-sm",children:t.content})]}),O&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"button_text",children:"Văn bản nút"}),e.jsx(d,{id:"button_text",name:"button_text",value:a.button_text||"",onChange:l,placeholder:"Ví dụ: Xem thêm",className:t.button_text?"border-destructive":""}),t.button_text&&e.jsx("p",{className:"text-destructive text-sm",children:t.button_text})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"button_url",children:"Liên kết"}),e.jsx(d,{id:"button_url",name:"button_url",value:a.button_url||"",onChange:l,placeholder:"URL (ví dụ: /contact)",className:t.button_url?"border-destructive":""}),t.button_url&&e.jsx("p",{className:"text-destructive text-sm",children:t.button_url})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"button_type",children:"Loại nút"}),e.jsxs(y,{value:a.button_type,onValueChange:s=>N("button_type",s),children:[e.jsx(C,{id:"button_type",className:t.button_type?"border-destructive":"",children:e.jsx(S,{placeholder:"Chọn loại nút"})}),e.jsx(w,{children:Object.entries(T).map(([s,n])=>e.jsx(F,{value:s,children:n},s))})]}),t.button_type&&e.jsx("p",{className:"text-destructive text-sm",children:t.button_type})]})]}),B&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"image",children:"Hình ảnh"}),e.jsx(d,{id:"image",name:"image",type:"file",accept:"image/*",onChange:H,className:t.image?"border-destructive":""}),t.image&&e.jsx("p",{className:"text-destructive text-sm",children:t.image}),(b||u)&&e.jsxs("div",{className:"mt-2 relative bg-muted rounded-md overflow-hidden",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Xem trước:"}),e.jsx("img",{src:b||u,alt:"Preview",className:"w-full max-h-60 object-contain"})]})]}),M&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"image_position",children:"Vị trí hình ảnh"}),e.jsxs(y,{value:a.image_position,onValueChange:s=>N("image_position",s),children:[e.jsx(C,{id:"image_position",className:t.image_position?"border-destructive":"",children:e.jsx(S,{placeholder:"Chọn vị trí"})}),e.jsx(w,{children:Object.entries(k).map(([s,n])=>e.jsx(F,{value:s,children:n},s))})]}),t.image_position&&e.jsx("p",{className:"text-destructive text-sm",children:t.image_position})]}),e.jsxs("div",{className:"pt-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{htmlFor:"is_active",className:"cursor-pointer",children:"Kích hoạt"}),e.jsx(z,{id:"is_active",checked:a.is_active,onCheckedChange:D})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Mục này sẽ ",a.is_active?"":"không"," được hiển thị trên trang web"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"sort_order",children:"Thứ tự hiển thị"}),e.jsx(d,{id:"sort_order",name:"sort_order",type:"number",value:a.sort_order,onChange:l,min:0,className:t.sort_order?"border-destructive":""}),t.sort_order&&e.jsx("p",{className:"text-destructive text-sm",children:t.sort_order}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Số nhỏ hơn sẽ được hiển thị trước"})]})]}),e.jsxs(Y,{className:"flex justify-between border-t pt-6",children:[e.jsx(j,{variant:"outline",type:"button",asChild:!0,children:e.jsx(f,{href:route("blocks.edit",h.id),children:"Hủy"})}),e.jsx(j,{type:"submit",disabled:v,children:v?"Đang lưu...":"Lưu thay đổi"})]})]})})]})})]})}export{je as default};
