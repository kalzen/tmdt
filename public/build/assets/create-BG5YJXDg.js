import{m as D,r as _,j as e,L as T,$ as k}from"./app-BXEVKu8S.js";import{A as F,D as M,a as S,b as L,k as B,l as E,m as H}from"./app-layout-FUQVz8B4.js";import{H as I}from"./heading-small-CJkaQd_g.js";import{B as u}from"./app-logo-icon-eA7Sa6_S.js";import{I as g}from"./input-DYl2xwC_.js";import{L as n}from"./label-BVOHeh7i.js";import{I as o}from"./input-error-bZuGRUfO.js";import{C as K}from"./checkbox-Bf-DNwcU.js";import{I as z}from"./image-uploader-JNWriVxQ.js";import{B as A}from"./badge-UXt2QoEz.js";import{E as P,T as $}from"./editor-7EuBvnPI.js";import{C as R}from"./chevron-down-CDMMiKSJ.js";import{z as U}from"./transition-D9ia2322.js";import"./index-BVUcwr4W.js";import"./index-DqbdpqtQ.js";import"./index-Bnnw5rqN.js";import"./card-CUhvS6T_.js";import"./PencilIcon-C6O4FU6Q.js";import"./index-BscCV4Ym.js";const V=[{title:"Bài viết",href:route("posts.index")},{title:"Tạo bài viết mới",href:route("posts.create")}];function ce({categories:d=[]}){const{data:t,setData:a,post:f,processing:x,errors:i,recentlySuccessful:v}=D({title:"",content:"",description:"",slug:"",image:null,is_published:!1,published_at:"",categories:[]}),[c,N]=_.useState([]),C=(s,l)=>{var b,j;let m,h;if(l){m=[...t.categories,s];const p=((b=d.find(r=>r.id===s))==null?void 0:b.name)||"";h=[...c,p]}else{m=t.categories.filter(r=>r!==s);const p=((j=d.find(r=>r.id===s))==null?void 0:j.name)||"";h=c.filter(r=>r!==p)}a("categories",m),N(h)},w=s=>{s.preventDefault(),f(route("posts.store"),{forceFormData:!0})},y=s=>{s.key==="Enter"&&(s.ctrlKey||s.metaKey)&&(s.preventDefault(),s.stopPropagation())};return e.jsxs(F,{breadcrumbs:V,children:[e.jsx(T,{title:"Tạo bài viết mới"}),e.jsxs("div",{className:"space-6 px-4 py-6",children:[e.jsx("div",{className:"pb-4",children:e.jsx(I,{title:"Tạo bài viết mới",description:"Thêm một bài viết mới vào blog của bạn"})}),e.jsxs("form",{onSubmit:w,className:"space-y-6 pt-4 border-t",onKeyDown:y,children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(n,{htmlFor:"title",children:"Tiêu đề"}),e.jsx(g,{id:"title",value:t.title,onChange:s=>a("title",s.target.value),placeholder:"Tiêu đề bài viết"}),e.jsx(o,{message:i.title})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(n,{htmlFor:"slug",children:"Đường dẫn"}),e.jsx(g,{id:"slug",value:t.slug,onChange:s=>a("slug",s.target.value),placeholder:"duong-dan-bai-viet"}),e.jsx(o,{message:i.slug})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(n,{htmlFor:"description",children:"Mô tả"}),e.jsx("textarea",{id:"description",className:"min-h-[120px] rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:t.description,onChange:s=>a("description",s.target.value),placeholder:"Mô tả ngắn gọn về bài viết của bạn",rows:3}),e.jsx(o,{message:i.description})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(n,{htmlFor:"content",children:"Nội dung"}),e.jsx(P,{value:t.content,onChange:s=>a("content",s),placeholder:"Viết nội dung bài viết của bạn tại đây..."}),e.jsx(o,{message:i.content})]}),e.jsx("div",{className:"grid gap-2",children:e.jsx(z,{id:"image",onChange:s=>a("image",s),title:"Hình ảnh đại diện",description:"Tải lên hình ảnh đại diện cho bài viết",error:i.image,helpText:"Hình ảnh sẽ được tự động tối ưu kích thước và chất lượng",placeholder:"/assets/image-placeholder.png",className:"w-24 h-24 rounded-md",previewClassName:"w-full h-48"})}),d.length>0&&e.jsxs("div",{className:"grid gap-2",children:[e.jsx(n,{htmlFor:"categories",children:"Danh mục"}),e.jsxs(M,{children:[e.jsx(S,{asChild:!0,children:e.jsxs(u,{variant:"outline",className:"w-full justify-between",children:[e.jsx("span",{className:"flex flex-wrap gap-1",children:c.length>0?c.map((s,l)=>e.jsx(A,{variant:"secondary",className:"mr-1",children:s},l)):e.jsx("span",{className:"text-muted-foreground",children:"Chọn danh mục cho bài viết"})}),e.jsx(R,{className:"h-4 w-4 opacity-50"})]})}),e.jsxs(L,{align:"start",className:"w-56 max-h-80 overflow-auto",children:[e.jsx(B,{children:"Danh mục"}),e.jsx(E,{}),d.map(s=>e.jsx(H,{checked:t.categories.includes(s.id),onCheckedChange:l=>C(s.id,l),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx($,{className:"w-4 h-4 mr-2 text-muted-foreground"}),s.name]})},s.id))]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Bạn có thể chọn nhiều danh mục cho bài viết"}),i.categories&&e.jsx("p",{className:"text-sm text-red-600",children:i.categories})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{id:"is_published",checked:t.is_published,onCheckedChange:s=>a("is_published",s)}),e.jsx(n,{htmlFor:"is_published",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Xuất bản ngay"}),e.jsx(o,{message:i.is_published})]}),!t.is_published&&e.jsxs("div",{className:"grid gap-2",children:[e.jsx(n,{htmlFor:"published_at",children:"Ngày xuất bản"}),e.jsx(g,{id:"published_at",type:"datetime-local",value:t.published_at,onChange:s=>a("published_at",s.target.value)}),e.jsx(o,{message:i.published_at})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(u,{type:"submit",disabled:x,children:x?"Đang lưu...":"Lưu bài viết"}),e.jsx(k,{href:route("posts.index"),children:e.jsx(u,{variant:"outline",type:"button",children:"Hủy"})}),e.jsx(U,{show:v,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-neutral-600",children:"Đã lưu"})})]})]})]})]})}export{ce as default};
